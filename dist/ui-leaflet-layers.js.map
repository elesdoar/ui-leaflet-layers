/**
           * ui-leaflet-layers
           *
           * @version: 0.1.3
           * @author: Michael Salgado <elesdoar@gmail.com>
           * @date: Thu Oct 27 2016 17:46:04 GMT-0500 (COT)
           * @license: MIT
           */
(function (window, angular){
  'use strict';
  {"version":3,"sources":["leafletHelpers.es6","leafletLayerHelpers.es6","logger.es6"],"names":["angular","module","config","$provide","decorator","$delegate","leafletLayersLogger","$log","_versionCompare","left","right","a","split","b","i","len","Math","max","length","parseInt","basicFunction","isLoaded","isDefined","layerType","is","layer","plugins","BingLayerPlugin","L","BingLayer","ChinaLayerPlugin","tileLayer","chinaProvider","HeatLayerPlugin","heatLayer","LeafletProviderPlugin","TileLayer","Provider","MapboxGL","mapboxGL","UTFGridPlugin","UtfGrid","WebGLHeatMapLayerPlugin","WebGLHeatMap","WFSLayerPlugin","GeoJSON","WFS","YandexLayerPlugin","Yandex","version","GoogleLayerPlugin","Google","GridLayer","GoogleMutant","versionCompare","esri","extend","AGSBaseLayerPlugin","basemapLayer","AGSClusteredLayerPlugin","clusteredFeatureLayer","AGSDynamicMapLayerPlugin","dynamicMapLayer","AGSFeatureLayerPlugin","featureLayer","AGSImageMapLayerPlugin","imageMapLayer","AGSHeatmapLayerPlugin","heatmapFeatureLayer","AGSTiledMapLayerPlugin","tiledMapLayer","window","lvector","AGSLayerPlugin","AGS","info","$rootScope","$q","leafletHelpers","isArray","isObject","errorHeader","utfGridCreateLayer","error","utfgrid","params","url","pluginOptions","on","e","$broadcast","layerTypes","ags","mustHaveUrl","createLayer","options","copy","onAdd","map","setMap","onRemove","agsBase","mustHaveLayer","agsClustered","warn","MarkerClusterPlugin","agsDynamic","agsFeature","load","loadedDefer","resolve","defer","off","agsHeatmap","agsImage","agsTiled","bing","key","china","type","google","toUpperCase","toLowerCase","heat","mustHaveData","data","setLatLngs","setOptions","here","provider","mapbox","mustHaveKey","mapId","user","apiKey","utfGrid","webGLHeatmap","setData","wfs","crs","eval","yandex","service","nemSimpleLogger","spawn"],"mappings":"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","file":"ui-leaflet-layers.js","sourcesContent":["angular.module('ui-leaflet')\n  .config(['$provide', $provide =>\n    $provide.decorator('leafletHelpers', ['$delegate', 'leafletLayersLogger', ($delegate, leafletLayersLogger) => {\n      const $log = leafletLayersLogger;\n\n      const _versionCompare = (left, right) => {\n        if(typeof left + typeof right !== 'stringstring') {\n          return false;\n        }\n\n        let a = left.split('.');\n        let b = right.split('.');\n        let i = 0, len = Math.max(a.length, b.length);\n\n        for (; i < len; i++) {\n          if ((a[i] && !b[i] && parseInt(a[i]) > 0) || (parseInt(a[i]) > parseInt(b[i]))) {\n            return 1;\n          } else if ((b[i] && !a[i] && parseInt(b[i]) > 0) || (parseInt(a[i]) < parseInt(b[i]))) {\n            return -1;\n          }\n        }\n\n        return 0;\n      };\n\n      const basicFunction = layerType =>\n        ({\n          isLoaded() {\n            return angular.isDefined(layerType);\n          },\n          is(layer) {\n            if (this.isLoaded()) {\n              return layer instanceof layerType;\n            }\n            return false;\n          }\n        });\n\n      const plugins = {\n        // Please keep keys order by alphabetical sort.\n        BingLayerPlugin: basicFunction(L.BingLayer),\n        ChinaLayerPlugin: basicFunction(L.tileLayer.chinaProvider),\n        HeatLayerPlugin: basicFunction(L.heatLayer),\n        LeafletProviderPlugin: basicFunction(L.TileLayer.Provider),\n        MapboxGL: basicFunction(L.mapboxGL),\n        UTFGridPlugin: basicFunction(L.UtfGrid),\n        WebGLHeatMapLayerPlugin: basicFunction(L.TileLayer.WebGLHeatMap),\n        WFSLayerPlugin: basicFunction(L.GeoJSON.WFS),\n        YandexLayerPlugin: basicFunction(L.Yandex)\n      };\n\n      if(_versionCompare(L.version, '1.0.0') === -1) {\n        plugins.GoogleLayerPlugin = basicFunction(L.Google);\n      } else {\n        plugins.GoogleLayerPlugin = basicFunction(L.GridLayer.GoogleMutant);\n      }\n      plugins.versionCompare = _versionCompare;\n\n      if(angular.isDefined(L.esri)) {\n        angular.extend(plugins, {\n          AGSBaseLayerPlugin: basicFunction(L.esri.basemapLayer),\n          AGSClusteredLayerPlugin: basicFunction(L.esri.clusteredFeatureLayer),\n          AGSDynamicMapLayerPlugin: basicFunction(L.esri.dynamicMapLayer),\n          AGSFeatureLayerPlugin: basicFunction(L.esri.featureLayer),\n          AGSImageMapLayerPlugin: basicFunction(L.esri.imageMapLayer),\n          AGSHeatmapLayerPlugin: basicFunction(L.esri.heatmapFeatureLayer),\n          AGSTiledMapLayerPlugin: basicFunction(L.esri.tiledMapLayer)\n        });\n      } else {\n        angular.extend(plugins, {\n          AGSBaseLayerPlugin: basicFunction(),\n          AGSClusteredLayerPlugin: basicFunction(),\n          AGSDynamicMapLayerPlugin: basicFunction(),\n          AGSFeatureLayerPlugin: basicFunction(),\n          AGSImageMapLayerPlugin: basicFunction(),\n          AGSHeatmapLayerPlugin: basicFunction(),\n          AGSTiledMapLayerPlugin: basicFunction()\n        });\n      }\n\n      if(angular.isDefined(window.lvector)) {\n        angular.extend(plugins, {\n          AGSLayerPlugin: basicFunction(window.lvector.AGS)\n        });\n      } else {\n        angular.extend(plugins, {\n          AGSLayerPlugin: basicFunction()\n        });\n      }\n\n      angular.extend($delegate, plugins);\n\n      $log.info('[ui-leaflet-layers] - Layers plugin is loaded');\n\n      return $delegate;\n    }])\n  ]);\n","angular.module('ui-leaflet')\n  .config(['$provide', $provide =>\n    $provide.decorator('leafletLayerHelpers',\n      ['$delegate', '$rootScope', '$q', 'leafletHelpers', 'leafletLayersLogger',\n      ($delegate, $rootScope, $q, leafletHelpers, leafletLayersLogger) => {\n        let $log = leafletLayersLogger;\n        let { isArray } = leafletHelpers;\n        let { isObject } = leafletHelpers;\n        let { isDefined } = leafletHelpers;\n        let { errorHeader } = leafletHelpers;\n        let utfGridCreateLayer = params => {\n          if (!leafletHelpers.UTFGridPlugin.isLoaded()) {\n            $log.error(errorHeader + ' The UTFGrid plugin is not loaded.');\n            return;\n          }\n\n          let utfgrid = new L.UtfGrid(params.url, params.pluginOptions);\n\n          utfgrid.on('mouseover', function(e) {\n            $rootScope.$broadcast('leafletDirectiveMap.utfgridMouseover', e);\n          });\n\n          utfgrid.on('mouseout', function(e) {\n            $rootScope.$broadcast('leafletDirectiveMap.utfgridMouseout', e);\n          });\n\n          utfgrid.on('click', function(e) {\n            $rootScope.$broadcast('leafletDirectiveMap.utfgridClick', e);\n          });\n\n          utfgrid.on('mousemove', function(e) {\n            $rootScope.$broadcast('leafletDirectiveMap.utfgridMousemove', e);\n          });\n\n          return utfgrid;\n        };\n\n        angular.extend($delegate.layerTypes, {\n          ags: {\n            mustHaveUrl: true,\n            createLayer: function(params) {\n              if (!leafletHelpers.AGSLayerPlugin.isLoaded()) {\n                return;\n              }\n\n              var options = angular.copy(params.options);\n              angular.extend(options, {\n                url: params.url\n              });\n              var layer = new lvector.AGS(options);\n              layer.onAdd = function(map) {\n                this.setMap(map);\n              };\n              layer.onRemove = function() {\n                this.setMap(null);\n              };\n              return layer;\n            }\n          },\n          agsBase: {\n            mustHaveLayer : true,\n            createLayer: function (params) {\n              if (!leafletHelpers.AGSBaseLayerPlugin.isLoaded()) {\n                return;\n              }\n              return L.esri.basemapLayer(params.layer, params.options);\n            }\n          },\n          agsClustered: {\n            mustHaveUrl: true,\n            createLayer: function(params) {\n              if (!leafletHelpers.AGSClusteredLayerPlugin.isLoaded()) {\n                $log.warn(errorHeader + ' The esri clustered layer plugin is not loaded.');\n                return;\n              }\n\n              if(!leafletHelpers.MarkerClusterPlugin.isLoaded()) {\n                $log.warn(errorHeader + ' The markercluster plugin is not loaded.');\n                return;\n              }\n              return L.esri.clusteredFeatureLayer(params.url, params.options);\n            }\n          },\n          agsDynamic: {\n            mustHaveUrl: true,\n            createLayer: function(params) {\n              if (!leafletHelpers.AGSDynamicMapLayerPlugin.isLoaded()) {\n                $log.warn(errorHeader + ' The esri plugin is not loaded.');\n                return;\n              }\n\n              params.options.url = params.url;\n\n              return L.esri.dynamicMapLayer(params.options);\n            }\n          },\n          agsFeature: {\n            mustHaveUrl: true,\n            createLayer: function(params) {\n              if (!leafletHelpers.AGSFeatureLayerPlugin.isLoaded()) {\n                $log.warn(errorHeader + ' The esri plugin is not loaded.');\n                return;\n              }\n\n              params.options.url = params.url;\n\n              var layer = L.esri.featureLayer(params.options);\n              var load = function() {\n                if(isDefined(params.options.loadedDefer)) {\n                  params.options.loadedDefer.resolve();\n                }\n              };\n              layer.on('loading', function() {\n                params.options.loadedDefer = $q.defer();\n                layer.off('load', load);\n                layer.on('load', load);\n              });\n\n              return layer;\n            }\n          },\n          agsHeatmap: {\n            mustHaveUrl: true,\n            createLayer: function(params) {\n              if (!leafletHelpers.AGSHeatmapLayerPlugin.isLoaded()) {\n                $log.warn(errorHeader + ' The esri heatmap layer plugin is not loaded.');\n                return;\n              }\n\n              if(!leafletHelpers.HeatLayerPlugin.isLoaded()) {\n                $log.warn(errorHeader + ' The heatlayer plugin is not loaded.');\n                return;\n              }\n              return L.esri.heatmapFeatureLayer(params.url, params.options);\n            }\n          },\n          agsImage: {\n            mustHaveUrl: true,\n            createLayer: function(params) {\n              if (!leafletHelpers.AGSImageMapLayerPlugin.isLoaded()) {\n                $log.warn(errorHeader + ' The esri plugin is not loaded.');\n                return;\n              }\n              params.options.url = params.url;\n\n              return L.esri.imageMapLayer(params.options);\n            }\n          },\n          agsTiled: {\n            mustHaveUrl: true,\n            createLayer: function(params) {\n              if (!leafletHelpers.AGSTiledMapLayerPlugin.isLoaded()) {\n                $log.warn(errorHeader + ' The esri plugin is not loaded.');\n                return;\n              }\n\n              params.options.url = params.url;\n\n              return L.esri.tiledMapLayer(params.options);\n            }\n          },\n          bing: {\n            mustHaveUrl: false,\n            createLayer(params) {\n              if (!leafletHelpers.BingLayerPlugin.isLoaded()) {\n                $log.error(errorHeader + ' The Bing plugin is not loaded.');\n                return;\n              }\n              return new L.BingLayer(params.key, params.options);\n            }\n          },\n\n          china: {\n            mustHaveUrl:false,\n            createLayer(params) {\n              let type = params.type || '';\n              if (!leafletHelpers.ChinaLayerPlugin.isLoaded()) {\n                $log.error(errorHeader + ' The ChinaLayer plugin is not loaded.');\n                return;\n              }\n              return L.tileLayer.chinaProvider(type, params.options);\n            }\n          },\n\n          google: {\n            mustHaveUrl: false,\n            createLayer(params) {\n              let type = params.type || 'SATELLITE';\n              if (!leafletHelpers.GoogleLayerPlugin.isLoaded()) {\n                $log.error(errorHeader + ' The GoogleLayer plugin is not loaded.');\n                return;\n              }\n              let layer = null;\n\n              if(leafletHelpers.versionCompare(L.version, '1.0.0') === -1) {\n                layer = new L.Google(type.toUpperCase(), params.options);\n              } else {\n                layer = new L.GridLayer.GoogleMutant({\n                  type: type.toLowerCase()\n                });\n              }\n              return layer;\n            }\n          },\n\n          heat: {\n            mustHaveUrl: false,\n            mustHaveData: true,\n            createLayer(params) {\n              if (!leafletHelpers.HeatLayerPlugin.isLoaded()) {\n                $log.error(errorHeader + ' The HeatMapLayer plugin is not loaded.');\n                return;\n              }\n              let layer = new L.heatLayer();\n              if (isArray(params.data)) {\n                layer.setLatLngs(params.data);\n              }\n              if (isObject(params.options)) {\n                layer.setOptions(params.options);\n              }\n              return layer;\n            }\n          },\n\n          here: {\n            mustHaveUrl: false,\n            createLayer: function(params) {\n              var provider = params.provider || 'HERE.terrainDay';\n              if (!leafletHelpers.LeafletProviderPlugin.isLoaded()) {\n                return;\n              }\n              return new L.TileLayer.Provider(provider, params.options);\n            }\n          },\n\n          mapbox: {\n            mustHaveKey: true,\n            createLayer(params) {\n              let url = '//api.mapbox.com/styles/v1/{user}/{mapId}/tiles/256/{z}/{x}/{y}?access_token={apiKey}';\n              return L.tileLayer(url, angular.extend(params.options, {\n                mapId: params.key,\n                user: params.user,\n                apiKey: params.apiKey\n              }));\n            }\n          },\n\n          mapboxGL: {\n            createLayer(params) {\n              if (!leafletHelpers.MapboxGL.isLoaded()) {\n                $log.error(errorHeader + ' The MapboxGL plugin is not loaded.');\n                return;\n              }\n              return new L.mapboxGL(params.options);\n            }\n          },\n\n          utfGrid: {\n            mustHaveUrl: true,\n            createLayer: utfGridCreateLayer\n          },\n\n          webGLHeatmap: {\n            mustHaveUrl: false,\n            mustHaveData: true,\n            createLayer(params) {\n              if (!leafletHelpers.WebGLHeatMapLayerPlugin.isLoaded()) {\n                $log.error(errorHeader + ' The WebGLHeatMapLayer plugin is not loaded.');\n                return;\n              }\n              let layer = new L.TileLayer.WebGLHeatMap(params.options);\n              if (isDefined(params.data)) {\n                layer.setData(params.data);\n              }\n              return layer;\n            }\n          },\n\n          wfs: {\n            mustHaveUrl: true,\n            mustHaveLayer: true,\n            createLayer(params) {\n              if (!leafletHelpers.WFSLayerPlugin.isLoaded()) {\n                $log.error(errorHeader + ' The WFSLayer plugin is not loaded.');\n                return;\n              }\n              let options = angular.copy(params.options);\n              if (options.crs && 'string' === typeof options.crs) {\n                options.crs = eval(options.crs);\n              }\n              return new L.GeoJSON.WFS(params.url, params.layer, options);\n            }\n          },\n\n          yandex: {\n            mustHaveUrl: false,\n            createLayer(params) {\n              let type = params.type || 'map';\n              if (!leafletHelpers.YandexLayerPlugin.isLoaded()) {\n                $log.error(errorHeader + ' The YandexLayer plugin is not loaded.');\n                return;\n              }\n              return new L.Yandex(type, params.options);\n            }\n          }\n        });\n\n        return $delegate;\n      }])\n  ]);\n","angular.module('ui-leaflet')\n  .service('leafletLayersLogger', ['nemSimpleLogger', nemSimpleLogger => nemSimpleLogger.spawn()]);\n"]}
})(window, angular);